" Be sure vim-plug is installed.
if !filereadable(expand('~/.vim/autoload/plug.vim'))
  echo 'Installing vim-plug'
  call system('mkdir -p ~/.vim/autoload/')
  let s:plug_source = 'https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
  let s:plug_destination = '~/.vim/autoload/plug.vim'

  if executable('curl')
    call system('curl "' . s:plug_source. '" > ' . s:plug_destination)
  elseif executable('wget')
    call system('wget -O ' . s:plug_destination. ' "' . s:plug_source . '"')
  else
    echo 'Unable to install vim-plug. Please install curl or wget.'
    echo 'Exiting...' | cquit
  endif
endif

" Grab some environment variables from zsh
let s:vim_lite = system('source ~/.zshrc && echo $_i3wm[vim_lite]')

call plug#begin('~/.vim/plugged')

" Fuzzy File Finder
" Plug 'https://github.com/junegunn/fzf.vim'
" Plug 'https://github.com/junegunn/fzf'

" Change working dir to project root
" TODO: Look into making a builtin function for this
Plug 'https://github.com/airblade/vim-rooter'

" Automatically insert common characters
Plug 'https://github.com/jiangmiao/auto-pairs'

" Color Scheme
Plug 'https://github.com/jsnal/vim-serape'

" Plugin for finding and viewing inline todo comments
Plug 'https://github.com/jsnal/vim-chore'

" Easy Commenting in and out
Plug 'https://github.com/tomtom/tcomment_vim', { 'on': 'TComment' }

if (!s:vim_lite)
  " Common syntax highlighting
  " TODO: See if there is a way to remove funky markdown syntax
  Plug 'https://github.com/sheerun/vim-polyglot'

  " Easier way of visualizing indention
  Plug 'https://github.com/Yggdroot/indentLine'

  " File Tree
  Plug 'https://github.com/justinmk/vim-dirvish'

  " Snippet Engine
  Plug 'https://github.com/sirver/UltiSnips', { 'on': [] }

  " Autocompletion that calls the LanguageClient
  Plug 'https://github.com/lifepillar/vim-mucomplete'

  " Language Server Protocol support for vim
  Plug 'https://github.com/autozimu/LanguageClient-neovim', {
        \ 'branch': 'next',
        \ 'do': 'bash install.sh',
        \ 'on': []
        \ }
endif

" Plugin Total: 13
call plug#end()

" Source all files in startup
filetype plugin on
if isdirectory($HOME . '/i3wm')
  for f in split(glob($HOME . '/i3wm/vim/startup/*.vim'), '\n')
    execute 'source' f
  endfor

  " Source highlight settings last
  source ~/i3wm/vim/startup/highlight.vim
endif
